<query xmlns="http://labkey.org/data/xml/query">
    <metadata>
        <tables xmlns="http://labkey.org/data/xml">
            <table tableName="treatment_order" tableDbType="TABLE">
                <!--<tableUrl>/query/detailsQueryRow.view?schemaName=study&amp;query.queryName=treatment_order&amp;lsid=${lsid}</tableUrl>-->
                <tableUrl>/EHR/treatmentDetails.view?key=${lsid}</tableUrl>
                <!--<insertUrl>/ehr/manageRecord.view?schemaName=study&amp;queryName=Treatment Order&amp;keyField=lsid&amp;</insertUrl>-->
                <!--<updateUrl>/ehr/manageRecord.view?schemaName=study&amp;queryName=Treatment Order&amp;keyField=lsid&amp;key=${lsid}</updateUrl>-->
                <insertUrl />
                <updateUrl />
                <deleteUrl />
                <columns>
                    <column columnName="project">
                        <fk>
                            <fkFolderPath>/wnprc/ehr/</fkFolderPath>
                            <fkDbSchema>lists</fkDbSchema>
                            <fkTable>project</fkTable>
                            <fkColumnName>project</fkColumnName>
                        </fk>
                    </column>
                    <column columnName="date">
                        <datatype>timestamp</datatype>
                        <columnTitle>Begin Date</columnTitle>
                        <formatString>yyyy-MM-dd HH:mm</formatString>
                    </column>
                    <column columnName="enddate">
                        <datatype>timestamp</datatype>
                        <columnTitle>End Date</columnTitle>
                        <isHidden>false</isHidden>
                        <formatString>yyyy-MM-dd HH:mm</formatString>
                    </column>
                    <column columnName="meaning">
                        <columnTitle>Short Name</columnTitle>
                    </column>
                    <column columnName="performedby">
                        <isHidden>false</isHidden>
                        <columnTitle>Ordered By</columnTitle>
                    </column>
                    <column columnName="lastAdministered">
                        <shownInInsertView>false</shownInInsertView>
                        <columnTitle>Last Administered</columnTitle>
                        <url>/query/executeQuery.view?schemaName=study&amp;
                            query.queryName=Drug%20Administration&amp;
                            query.parentid~eq=${objectid}&amp;
                        </url>
                    </column>
                    <column columnName="code">
                        <datatype>varchar</datatype>
                        <nullable>false</nullable>
                        <columnTitle>Treatment</columnTitle>
                        <fk>
                            <fkFolderPath>/wnprc/ehr/</fkFolderPath>
                            <fkDbSchema>ehr_lookups</fkDbSchema>
                            <fkTable>snomed</fkTable>
                            <fkColumnName>code</fkColumnName>
                        </fk>
                    </column>
                    <column columnName="parentId">
                        <!--<fk>-->
                          <!--<fkFolderPath>/wnprc/ehr/</fkFolderPath>-->
                          <!--<fkDbSchema>study</fkDbSchema>-->
                          <!--<fkTable>studyDataParent</fkTable>-->
                          <!--<fkColumnName>objectid</fkColumnName>-->
                        <!--</fk>-->
                    </column>
                    <column columnName="frequency">
                        <fk>
                          <fkFolderPath>/wnprc/ehr/</fkFolderPath>
                          <fkDbSchema>ehr_lookups</fkDbSchema>
                          <fkTable>treatment_frequency</fkTable>
                          <fkColumnName>rowid</fkColumnName>
                        </fk>
                    </column>

                    <!--<column columnName="dateOnly" wrappedColumnName="lsid">-->
                        <!--<columnTitle>DateOnly</columnTitle>-->
                        <!--<isHidden>true</isHidden>-->
                        <!--<isUnselectable>true</isUnselectable>-->
                        <!--<fk>-->
                            <!--<fkFolderPath>/wnprc/ehr/</fkFolderPath>-->
                            <!--<fkDbSchema>study</fkDbSchema>-->
                            <!--<fkTable>treatmentDate</fkTable>-->
                            <!--<fkColumnName>lsid</fkColumnName>-->
                        <!--</fk>-->
                    <!--</column>-->
                    <column columnName="route">
                        <!--<columnTitle>Route</columnTitle>-->
                        <fk>
                            <fkFolderPath>/wnprc/ehr/</fkFolderPath>
                            <fkDbSchema>ehr_lookups</fkDbSchema>
                            <fkTable>routes</fkTable>
                            <fkColumnName>route</fkColumnName>
                        </fk>
                        <displayWidth>40</displayWidth>
                    </column>
                    <column columnName="vol_units">
                        <columnTitle>Volume Units</columnTitle>
                        <fk>
                            <fkFolderPath>/wnprc/ehr/</fkFolderPath>
                            <fkDbSchema>ehr_lookups</fkDbSchema>
                            <fkTable>volume_units</fkTable>
                            <fkColumnName>unit</fkColumnName>
                        </fk>
                    </column> 
                    <column columnName="concentration">
                        <columnTitle>Drug Conc</columnTitle>
                    </column>
                    <column columnName="conc_units">
                        <columnTitle>Conc Units</columnTitle>
                        <fk>
                            <fkFolderPath>/wnprc/ehr/</fkFolderPath>
                            <fkDbSchema>ehr_lookups</fkDbSchema>
                            <fkTable>conc_units</fkTable>
                            <fkColumnName>unit</fkColumnName>
                        </fk>
                    </column>
                    <column columnName="amount_units">
                        <columnTitle>Amount Units</columnTitle>
                        <fk>
                            <fkFolderPath>/wnprc/ehr/</fkFolderPath>
                            <fkDbSchema>ehr_lookups</fkDbSchema>
                            <fkTable>amount_units</fkTable>
                            <fkColumnName>unit</fkColumnName>
                        </fk>
                    </column>
                    <column columnName="amount">
                        <columnTitle>Amount To Give</columnTitle>
                    </column>
                    <column columnName="dosage_units">
                        <columnTitle>Dosage Units</columnTitle>
                        <fk>
                            <fkFolderPath>/wnprc/ehr/</fkFolderPath>
                            <fkDbSchema>ehr_lookups</fkDbSchema>
                            <fkTable>dosage_units</fkTable>
                            <fkColumnName>unit</fkColumnName>
                        </fk>
                    </column>
                    <column columnName="userid">
                        <columnTitle>Ordered By</columnTitle>
                    </column>
                </columns>
            </table>
        </tables>
    </metadata>
</query>