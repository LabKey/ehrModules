 <query xmlns="http://labkey.org/data/xml/query">
    <metadata> 
        <tables xmlns="http://labkey.org/data/xml">
            <table tableName="virologyResults" tableDbType="TABLE">
                <tableUrl>/query/detailsQueryRow.view?schemaName=study&amp;query.queryName=virologyResults&amp;lsid=${lsid}</tableUrl>
                <!--<insertUrl>/ehr/manageRecord.view?schemaName=study&amp;queryName=Virology Results&amp;keyField=lsid&amp;</insertUrl>-->
                <!--<updateUrl>/ehr/manageRecord.view?schemaName=study&amp;queryName=Virology Results&amp;keyField=lsid&amp;key=${lsid}</updateUrl>-->
                <insertUrl />
                <importUrl />
                <updateUrl />
                <deleteUrl />
                <columns>
                    <column columnName="date">
                        <formatString>yyyy-MM-dd</formatString>
                    </column>
                    <column columnName="parentid">
                        <!--<fk>-->
                          <!--<fkDbSchema>study</fkDbSchema>-->
                          <!--<fkTable>Clinpath Runs</fkTable>-->
                          <!--<fkColumnName>objectid</fkColumnName>-->
                        <!--</fk>-->
                    </column>
                    <column columnName="runId" wrappedColumnName="parentid">
                        <isHidden>false</isHidden>
                        <fk>
                          <fkDbSchema>study</fkDbSchema>
                          <fkTable>clinpathRunsParent</fkTable>
                          <fkColumnName>objectid</fkColumnName>
                        </fk>
                    </column>
                    <column columnName="method">
                      <!--<nullable>false</nullable>-->
                      <columnTitle>Method</columnTitle>
                      <fk>
                        <fkDbSchema>ehr_lookups</fkDbSchema>
                        <fkTable>virology_method</fkTable>
                        <fkColumnName>method</fkColumnName>
                      </fk>
                    </column>
                    <column columnName="virus">
                        <columnTitle>Virus</columnTitle>
                        <fk>
                          <fkDbSchema>ehr_lookups</fkDbSchema>
                          <fkTable>virology_tests</fkTable>
                          <fkColumnName>testid</fkColumnName>
                        </fk>
                    </column>
                    <column columnName="result">
                        <columnTitle>Result</columnTitle>
                    </column>
                    <column columnName="units">
                        <columnTitle>Units</columnTitle>
                    </column>
                    <column columnName="qualresult">
                        <columnTitle>Qualitative Result</columnTitle>
                        <fk>
                            <fkDbSchema>ehr_lookups</fkDbSchema>
                            <fkTable>qualitative_results</fkTable>
                            <fkColumnName>result</fkColumnName>
                        </fk>
                    </column>
                    <column columnName="testid">
                        <columnTitle>Test Id</columnTitle>
                        <fk>
                            <fkDbSchema>ehr_lookups</fkDbSchema>
                            <fkTable>virology_tests</fkTable>
                            <fkColumnName>testid</fkColumnName>
                        </fk>
                    </column>
                    <column columnName="source">
                        <columnTitle>Sample Type</columnTitle>
                        <fk>
                          <fkDbSchema>ehr_lookups</fkDbSchema>
                          <fkTable>clinpath_sampletype</fkTable>
                          <fkColumnName>sampletype</fkColumnName>
                        </fk>
                    </column>
                    <column columnName="sampleCode">
                        <columnTitle>Sample Type</columnTitle>
                        <fk>
                            <fkDbSchema>ehr_lookups</fkDbSchema>
                            <fkTable>snomed</fkTable>
                            <fkColumnName>code</fkColumnName>
                        </fk>
                    </column>
                    <column columnName="virusCode">
                        <columnTitle>Virus</columnTitle>
                        <fk>
                            <fkDbSchema>ehr_lookups</fkDbSchema>
                            <fkTable>snomed</fkTable>
                            <fkColumnName>code</fkColumnName>
                        </fk>
                    </column>
                </columns>
            </table>
        </tables>
    </metadata>
</query>