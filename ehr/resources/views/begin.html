<html>
<script type="text/javascript">

LABKEY.requiresScript("/ehr/navMenu.js");


Ext.onReady(createNavMenu);

function createNavMenu()
{
    if (!window.EHR || !window.EHR.ext || !window.EHR.ext.NavMenu)
    {
        createNavMenu.defer(10);
        return;
    }


    new EHR.ext.NavMenu({
        renderTo: 'ehrMenu1',
        sections: [
            {header: 'By Animal',
            items: [
                {name: 'Animal History', url: '<%=contextPath%>/ehr/WNPRC/EHR/animalHistory.view?'},
                {name: 'Animal Search', url: '<%=contextPath%>/ehr/WNPRC/EHR/animalSearch.view?'}
                ]},
            {header: 'By Dataset',
            items: [
                {name: 'Browse All Datasets', url: '<%=contextPath%>/ehr/WNPRC/EHR/datasets.view?'},
                {name: 'Clinical Remarks', url: '<%=contextPath%>/query/WNPRC/EHR/executeQuery.view?schemaName=study&query.queryName=Clinical%20Remarks'},
                {name: 'Housing Queries', url: '<%=contextPath%>/ehr/WNPRC/EHR/housingQueries.view?'},
                {name: 'Protocol and Project Queries', url: '<%=contextPath%>/ehr/WNPRC/EHR/projectQueries.view?'}
            ]},
            {header: 'By Location',
            items: [
                {name: 'Search By Room, Floor or Cage', url: '<%=contextPath%>/ehr/WNPRC/EHR/animalHistory.view#_inputType:renderRoomCage'},
                {name: 'Irregular Obs By Location', url: '<%=contextPath%>/ehr/WNPRC/EHR/animalHistory.view#_inputType:renderRoomCage&activeReport:obs'},
                {name: 'Clinical Remarks By Location', url: '<%=contextPath%>/ehr/WNPRC/EHR/animalHistory.view#_inputType:renderRoomCage&activeReport:clinremarks'}
            ]},
            {header: 'Today At WNPRC',
            items: [
                {name: 'Blood Draw Schedule', url: '<%=contextPath%>/ehr/WNPRC/EHR/animalHistory.view#_inputType:renderColony&_showReport:1&combineSubj:true&activeReport:todaysBlood'},
                {name: 'Irregular Observations', url: '<%=contextPath%>/ehr/WNPRC/EHR/animalHistory.view#_inputType:renderRoomCage&activeReport:obs'},
                {name: 'Treatment Schedule - AM', url: '<%=contextPath%>/ehr/WNPRC/EHR/animalHistory.view#_inputType:renderRoomCage&activeReport:treatmentScheduleAM'},
                {name: 'Treatment Schedule - PM', url: '<%=contextPath%>/ehr/WNPRC/EHR/animalHistory.view#_inputType:renderRoomCage&activeReport:treatmentSchedulePM'},
                {name: 'Treatment Schedule - Night', url: '<%=contextPath%>/ehr/WNPRC/EHR/animalHistory.view#_inputType:renderRoomCage&activeReport:treatmentScheduleNight'},
                {name: 'Treatment Schedule - All', url: '<%=contextPath%>/ehr/WNPRC/EHR/animalHistory.view#_inputType:renderRoomCage&activeReport:treatmentSchedule'},
                {name: 'Forms Completed Today', url: '<%=contextPath%>/query/WNPRC/EHR/executeQuery.view?schemaName=ehr&query.queryName=TasksByLocation&query.viewName=Completion Times&query.taskid/Created~dateeq='+(new Date()).format('Y-m-d')}
            ]}
        ]
    });


    new EHR.ext.NavMenu({
        renderTo: 'ehrMenu2',
        sections: [
            {header: 'Entire Colony',
            items: [
                {name: 'Animal Utilization By Category', url: '<%=contextPath%>/query/WNPRC/EHR/executeQuery.view?schemaName=study&query.queryName=colonyAssignmentSummary'},
                {name: 'Blood Draw Summary', url: '<%=contextPath%>/query/WNPRC/EHR/executeQuery.view?schemaName=study&query.queryName=ScheduledBlood'},
                {name: 'Colony Population By Age', url: '<%=contextPath%>/query/WNPRC/EHR/executeQuery.view?schemaName=study&query.queryName=Colony Population By Age'},
                {name: 'MHC Genotype Summary', url: '<%=contextPath%>/query/WNPRC/EHR/executeQuery.view?schemaName=study&query.queryName=alleleFrequencies'},
                {name: 'Population Summary', url: '<%=contextPath%>/ehr/WNPRC/EHR/populationOverview.view?'},
                {name: 'Room Utilization', url: '<%=contextPath%>/query/WNPRC/EHR/executeQuery.view?schemaName=ehr&query.queryName=RoomUtilization'},
                {name: 'Time Chart', url: '<%=contextPath%>/visualization/WNPRC/EHR/timeChartWizard.view?edit=true'},
                {name: 'Viral Challenges', url: '<%=contextPath%>/query/WNPRC/EHR/executeQuery.view?schemaName=study&query.queryName=ViralChallenges'},
                {name: 'Weight: 10% Drop In Last 30 Days', url: '<%=contextPath%>/query/WNPRC/EHR/executeQuery.view?schemaName=study&query.queryName=weightRelChange&query.viewName=10 Pct Drop In Last 30 Days'},
                {name: 'Weight: 10% Drop In Last 90 Days', url: '<%=contextPath%>/query/WNPRC/EHR/executeQuery.view?schemaName=study&query.queryName=weightRelChange&query.viewName=10 Pct Drop In Last 90 Days'},
                {name: 'Weight: 10% Drop In Last 6 Months', url: '<%=contextPath%>/query/WNPRC/EHR/executeQuery.view?schemaName=study&query.queryName=weightRelChange&query.viewName=10 Pct Drop In Last 6 Months'},
                {name: 'More Reports', url: '<%=contextPath%>/ehr/WNPRC/EHR/moreReports.view?'}
            ]},
            {header: 'Validation and Alerts',
             items: [
                 {name: 'Animals Without Assignments', url: '<%=contextPath%>/query/WNPRC/EHR/executeQuery.view?schemaName=study&query.queryName=Demographics&query.viewName=No Active Assignments'},
                 {name: 'Cage Review', url: '<%=contextPath%>/query/WNPRC/EHR/executeQuery.view?schemaName=study&query.queryName=CageReview&query.viewName=Problem%20Cages'},
                 {name: 'Cages Lacking Dimensions', url: '<%=contextPath%>/query/WNPRC/EHR/executeQuery.view?schemaName=ehr&query.queryName=missingCages'},

                 {name: 'Housing: Condition Problems', url: '<%=contextPath%>/query/WNPRC/EHR/executeQuery.view?schemaName=study&query.queryName=housingConditionProblems&query.viewName=Problems'},
                 {name: 'Housing: Double Entries', url: '<%=contextPath%>/query/WNPRC/EHR/executeQuery.view?schemaName=study&query.queryName=housingProblems'},
                 {name: 'Loners', url: '<%=contextPath%>/query/WNPRC/EHR/executeQuery.view?schemaName=study&query.queryName=demographicsDaysAlone&query.viewName=Alone 30 Days Without Exemptions'},

                 {name: 'Rooms Without Obs Today', url: '<%=contextPath%>/query/WNPRC/EHR/executeQuery.view?schemaName=ehr&query.queryName=RoomsWithoutObsToday'},
                 {name: 'TB: Untested In >4 Months', url: '<%=contextPath%>/query/WNPRC/EHR/executeQuery.view?schemaName=study&query.queryName=Demographics&query.viewName=TB Older Than 4 Months'},
                 {name: 'Unweighed In Past 45 Days', url: '<%=contextPath%>/query/WNPRC/EHR/executeQuery.view?schemaName=study&query.queryName=Demographics&query.viewName=Unweighed%20Over%2045%20Days'}
             ]}

        ]
    });

    var menuCfg = {
        renderTo: 'ehrMenu3',
        sections: [
            {header: 'Misc',
            items: [
                {name: 'About the EHR Project', url: '<%=contextPath%>/project/WNPRC/EHR/About The EHR/begin.view?'},
                {name: 'Compare Lists of Animals', url: '<%=contextPath%>/ehr/WNPRC/EHR/utilities.view?'},
                {name: 'Run SQL Directly', url: '<%=contextPath%>/ehr/WNPRC/EHR/executeSql.view?'},
                {name: 'Search WNPRC SNOMED Codes', url: '<%=contextPath%>/query/WNPRC/EHR/executeQuery.view?schemaName=ehr_lookups&query.queryName=snomed'},
                {name: 'Search ALL SNOMED Codes', url: '<%=contextPath%>/query/WNPRC/EHR/executeQuery.view?schemaName=ehr_lookups&query.queryName=full_snomed'}
            ]},
            {header: 'Data Entry',
            items: [
                {name: 'Enter Data', url: '<%=contextPath%>/ehr/WNPRC/EHR/dataEntry.view'},
                {name: 'Download Paper Forms', url: '<%=contextPath%>/list/WNPRC/WNPRC_Units/Animal_Services/Compliance_Training/Public/grid.view?listId=1399'}
            ]},
            {header: 'Request Services',
            items: [
                {name: 'Views Requests', url: '<%=contextPath%>/ehr/WNPRC/EHR/requestServices.view'},
                {name: 'Request Biopsy Processing', url: 'http://yakui.primate.wisc.edu/pathology/BiopsyForm.html'},
                {name: 'Request Blood Draws', url: '<%=contextPath%>/ehr/WNPRC/EHR/manageRequest.view?formtype=Blood%20Draw%20Request'},
                {name: 'Request Clinpath Services', url: '<%=contextPath%>/ehr/WNPRC/EHR/manageRequest.view?formtype=Clinpath%20Request'},
                {name: 'Request Clinpath Services (old)', url: 'http://www.primate.wisc.edu/clinpath/'},
                {name: 'Request Necropsy Processing', url: 'http://yakui.primate.wisc.edu/pathology/NecropsyForm.html'},
                {name: 'Request Project', url: 'http://www.primate.wisc.edu/colony-old/project-form.html'}
            ]}
        ]
    };

    if (LABKEY.Security.currentUser.isAdmin){
        menuCfg.sections.push({
            header: 'Admin',
            items: [
                {name: 'EHR Admin Page', url: '<%=contextPath%>/ehr/WNPRC/EHR/ehrAdmin.view'},
                {name: 'Manage EHR Study', url: '<%=contextPath%>/study/WNPRC/EHR/manageStudy.view?'},
                {name: 'Manage Lookup Tables', url: '<%=contextPath%>/ehr/WNPRC/EHR/dataAdmin.view'}
            ]
        })

    }

    new EHR.ext.NavMenu(menuCfg);

}

</script>
<body>

<div style="max-width:920px">
    Below are the sections of the Electronic Health Record.  If there are additional reports you would like, please submit a request <a href="<%=contextPath%>/issues/WNPRC/EHR/Issue_Tracker/list.view?" target="_blank">here</a>.
    <br><br>
</div>

<table>
<!--<tr style="vertical-align:top">-->
<!--<td colspan="3">-->
    <!--<a class="labkey-main-title">-->
        <!--Electronic Health Record:-->
    <!--</a>-->
    <!--<p/>-->
<!--</td>-->
<!--</tr>-->
<tr style="vertical-align:top">
    <td style="width:300px">
        <div id="ehrMenu1"></div>
    </td>
    <td style="width:300px;vertical-align:top">
        <div id="ehrMenu2"></div>
    </td>
    <td style="width:300px">
        <div id="ehrMenu3"></div>
    </td>
</tr>




</table>

<div id="ehrMenu"></div>

</body>
</html>