<html>
<head>
<script type="text/javascript">

/*!
 * Ext JS Library 3.2.1
 * Copyright(c) 2006-2010 Ext JS, Inc.
 * licensing@extjs.com
 * http://www.extjs.com/license
 */

LABKEY.requiresScript("/ehr/ehrAPI.js");


Ext.onReady(function(){
    var btns = 'VALIDATE,SUBMIT,'+(LABKEY.ActionURL.getParameter('update') ? '' : 'SUBMITANDNEXT')+',DISCARD';

    var panel = new EHR.ext.SimpleImportPanel({
        containerPath: 'WNPRC/EHR/',
        allowableButtons: btns,
        formType: LABKEY.ActionURL.getParameter('queryName'),
        formSections: [{
            xtype: 'ehr-formpanel',
            schemaName: LABKEY.ActionURL.getParameter('schemaName'),
            queryName: LABKEY.ActionURL.getParameter('queryName'),
            keyField: LABKEY.ActionURL.getParameter('keyField'),
            keyValue: Ext.util.Format.htmlDecode(LABKEY.ActionURL.getParameter('key')),
            title: LABKEY.ActionURL.getParameter('queryName'),
            metadata: EHR.ext.getTableMetadata(LABKEY.ActionURL.getParameter('queryName'), ['SimpleForm'])
        }]
    });
    panel.render('manageRecordDiv');
    LABKEY.NavTrail.setTrail(LABKEY.ActionURL.getParameter('title') || EHR.utils.toTitleCase(LABKEY.ActionURL.getParameter('queryName')));

});


</script>
</head>
<body>
<div id="manageRecordDiv"></div>



</body>


</html>